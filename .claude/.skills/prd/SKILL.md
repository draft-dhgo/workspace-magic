---
name: prd
description: PRD(Product Requirements Document)를 작성하고 관리합니다. 사용자와 토론을 통해 기능을 구체화하고, 개념을 고착화하여 체계적인 PRD를 생성합니다. 기능 추가, PRD 작성, 요구사항 정리, 제품 기획 시 사용합니다.
allowed-tools: Read, Write, Edit, Task, TodoWrite, Grep, Glob, AskUserQuestion, WebSearch
---

# PRD Skill

사용자와 대화를 통해 기능을 구체화하고, 체계적인 PRD(Product Requirements Document)를 작성하는 스킬입니다.

## When to Activate

다음 상황에서 이 스킬을 활성화합니다:
- 사용자가 **새로운 기능**을 설명하거나 추가하고 싶어할 때
- **PRD 작성**을 요청할 때
- **요구사항을 정리**하고 싶어할 때
- **제품 기획**에 대해 논의하고 싶어할 때
- `prd/` 디렉토리의 파일을 작업할 때

**핵심 원칙:** 단순히 받아적지 말고, 사용자와 **토론**하며 아이디어를 발전시킵니다.

## 동작 방식

### Phase 1: 발견 (Discovery)

사용자가 기능을 설명하면:

1. **핵심 파악**: 사용자가 말하는 기능의 본질이 무엇인지 파악
2. **빈틈 탐색**: 설명에서 빠진 부분, 모호한 부분을 식별
3. **질문 던지기**: AskUserQuestion을 활용해 구체적인 질문을 던짐

질문할 때는 다음을 중심으로:
- **사용자는 누구인가?** (타깃 유저, 페르소나)
- **왜 필요한가?** (문제 정의, 동기)
- **무엇을 해결하는가?** (핵심 가치)
- **어떻게 동작하는가?** (주요 플로우)
- **경계는 어디인가?** (스코프, 하지 않을 것)

### Phase 2: 토론 (Discussion)

사용자의 답변을 바탕으로 깊이 있는 토론을 진행합니다:

1. **반론 제기**: "이 방식이면 이런 문제가 생길 수 있는데요..."
2. **대안 제시**: "이런 접근은 어떨까요?"
3. **엣지 케이스**: "이런 상황에서는 어떻게 동작해야 할까요?"
4. **우선순위 확인**: "이 기능들 중 MVP에 꼭 들어가야 하는 건?"
5. **트레이드오프**: "A를 선택하면 B를 포기해야 하는데, 괜찮으신가요?"

**토론 규칙:**
- 한 번에 질문은 최대 3개까지만
- 사용자의 컨텍스트를 존중하되, 빠진 부분은 반드시 짚기
- 결정은 사용자가 내리되, 판단 근거는 클로드가 제공
- 토론이 충분하다고 판단되면 Phase 3로 넘어감을 알리기

### Phase 3: 고착화 (Crystallization)

토론 내용을 정리하여 PRD를 작성합니다:

1. **요약 제시**: 토론 결과를 간결하게 정리하여 사용자에게 확인
2. **순번 결정**: `prd/` 디렉토리를 Glob(`prd/PRD-*.md`)으로 스캔하여 다음 순번 결정
3. **PRD 작성**: 결정된 순번으로 `PRD-{NNN}.md` 파일을 템플릿에 맞춰 작성
4. **리뷰 요청**: 작성된 PRD를 사용자에게 보여주고 피드백 수집
5. **반복**: 피드백 반영 후 최종 확정

## PRD 저장 위치

PRD 파일은 프로젝트 루트의 `prd/` 디렉토리에 **순번 기반**으로 저장합니다:

```
prd/
├── PRD-001.md          # 첫 번째 PRD
├── PRD-002.md          # 두 번째 PRD
├── PRD-003.md          # 세 번째 PRD
└── ...
```

### 순번 결정 규칙

1. PRD 작성 전 `prd/` 디렉토리를 Glob으로 스캔하여 기존 파일 목록을 확인
2. `PRD-{NNN}.md` 패턴의 파일 중 가장 큰 번호를 찾음
3. 해당 번호 + 1로 새 PRD 파일 생성
4. `prd/` 디렉토리가 비어있거나 없으면 `PRD-001.md`부터 시작
5. 번호는 3자리 zero-padding (001, 002, ..., 099, 100)

## PRD 템플릿

아래 템플릿 구조를 따릅니다. 단, 프로젝트 성격에 따라 불필요한 섹션은 생략 가능합니다.

```markdown
# PRD-{NNN}: {기능명}

> 한 줄 요약: {이 기능이 뭔지 한 문장으로}

## 1. 배경 (Background)

### 문제 정의
- 현재 어떤 문제가 있는가?
- 이 문제가 왜 중요한가?

### 동기
- 왜 지금 이 기능을 만드는가?
- 어떤 기회나 니즈가 있는가?

## 2. 목표 (Goals)

### 핵심 목표
- [ ] 목표 1
- [ ] 목표 2

### 비목표 (Non-Goals)
- 이번 스코프에서 하지 않을 것
- 의도적으로 제외하는 것

## 3. 사용자 (Users)

### 타깃 사용자
- 주요 사용자 그룹과 특성

### 사용자 시나리오
- **시나리오 1**: {사용자가 어떤 상황에서 어떻게 사용하는지}
- **시나리오 2**: ...

## 4. 기능 요구사항 (Functional Requirements)

### 핵심 기능
각 기능은 우선순위를 명시합니다: P0(필수), P1(중요), P2(있으면 좋음)

| ID | 기능 | 설명 | 우선순위 |
|----|------|------|----------|
| FR-1 | ... | ... | P0 |
| FR-2 | ... | ... | P1 |

### 상세 플로우
주요 기능의 동작 흐름을 단계별로 기술합니다.

## 5. 비기능 요구사항 (Non-Functional Requirements)

- **성능**: 응답 시간, 처리량 등
- **보안**: 인증, 권한, 데이터 보호
- **확장성**: 사용자/데이터 증가 대응
- **접근성**: 지원 환경, 디바이스

## 6. 엣지 케이스 & 예외 처리

| 상황 | 처리 방식 |
|------|-----------|
| ... | ... |

## 7. 성공 지표 (Success Metrics)

- 이 기능이 성공했다는 걸 어떻게 알 수 있는가?
- 측정 가능한 지표

## 8. 타임라인 & 마일스톤

| 마일스톤 | 내용 | 예상 시점 |
|----------|------|-----------|
| MVP | ... | ... |

## 9. 열린 질문 (Open Questions)

- [ ] 아직 결정되지 않은 사항들

## 10. 변경 이력

| 날짜 | 변경 내용 | 작성자 |
|------|-----------|--------|
| {date} | 초안 작성 | Claude & {user} |
```

### Phase 4: 통합문서 반영 (Consolidation Sync)

PRD 작성이 완료(Phase 3 Crystallization 완료)된 후, 통합문서에 자동 반영한다.

1. `prd/PRD-CONSOLIDATED.md` 존재 여부를 Read로 확인
2. **존재하는 경우**:
   1. 통합문서의 "통합 출처" 또는 "원본 PRD" 행을 읽어 이미 반영된 PRD 번호 목록을 파악
   2. 방금 작성한 PRD 번호가 목록에 없으면 → 미반영 상태
   3. 미반영이면 **증분 통합** 실행:
      - 통합문서의 기존 내용은 유지하면서, 새 PRD의 요구사항을 적절한 섹션에 추가
      - 기능 요구사항: 기존 번호 체계를 이어받아 새 항목 추가
      - 비기능 요구사항, 엣지 케이스 등: 기존 항목과 중복되지 않는 것만 추가
      - "통합 출처" 행에 새 PRD 번호 추가
      - "변경 이력"에 추가 기록 (날짜, 변경 내용, 출처 PRD, 작성자)
   4. wiki/prd-consolidate/ 에 통합 작업 기록 (wiki 스킬 규칙 준수)
3. **존재하지 않는 경우**:
   - `prd/PRD-*.md`를 Glob으로 스캔하여 PRD 개수 확인
   - PRD가 2개 이상: 사용자에게 "PRD 통합을 먼저 실행하세요"라고 안내 (prd-consolidate 스킬)
   - PRD가 1개(방금 작성한 것)뿐: 통합 불필요, 스킵

**증분 통합 시 주의사항:**
- 기존 통합문서의 구조와 문체를 유지
- 기존 요구사항과 충돌이 발견되면 AskUserQuestion으로 사용자에게 확인
- 통합문서의 계층적 위계(최상위 권위)를 훼손하지 않음

## 기존 PRD 수정

기존 PRD를 수정할 때:
1. 먼저 기존 PRD를 읽어서 내용 파악
2. 사용자가 원하는 변경사항 확인
3. 변경이 기존 요구사항과 충돌하지 않는지 검토
4. 변경 이력에 수정 내용 기록

## 출력 형식

PRD 작업 후 다음 형식으로 상태를 보고합니다:

```
📋 PRD 상태: PRD-{NNN} ({기능명})

진행 단계: {Discovery / Discussion / Crystallization / Complete}

요약:
- 핵심 기능: {주요 기능 목록}
- 스코프: {포함/제외 사항}
- 타깃 사용자: {대상}

결정된 사항:
- {결정 1}
- {결정 2}

열린 질문:
- {미결정 사항}

다음 단계:
- {다음에 할 일}
```

## 중요 원칙

1. **사용자의 말을 그대로 옮기지 말 것** - 구조화하고 빠진 부분을 채움
2. **추측으로 채우지 말 것** - 모르면 물어봄
3. **토론 없이 바로 작성하지 말 것** - 최소 1회 이상의 질문/토론 사이클
4. **너무 무거워지지 말 것** - 프로젝트 규모에 맞게 섹션 조절
5. **한국어로 작성** - PRD 본문은 한국어로 작성 (기술 용어는 영문 병기 가능)
