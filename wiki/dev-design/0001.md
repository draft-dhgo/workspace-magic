# Workspace Magic 개발 설계서 작성

> 에이전트: dev-design
> 일시: 2026-02-27 10:00
> 상위 문서: prd/PRD-CONSOLIDATED.md

## 수행 내용

PRD-CONSOLIDATED.md를 분석하여 Workspace Magic 프로젝트의 개발 설계서를 작성하였다.

- PRD에서 기능 요구사항 9개 영역, 비기능 요구사항 7개, 엣지 케이스 4개를 추출
- Electron + React + TypeScript 기반의 시스템 아키텍처 설계
- Main Process / Preload / Renderer Process 3계층 분리
- 9개 모듈 (StorageService, ResourceService, ComposeService, WorkspaceService, GitService, Pages, Components, Stores, Preload) 상세 설계
- 데이터 모델 정의 (Resource 5종 + Compose + AppData)
- IPC 채널 24개 정의
- PRD 매핑 검증표를 통해 모든 요구사항의 설계 반영 확인
- 의존성 기반 5단계 구현 순서 제안

## 산출물

- `docs/design.md` - Workspace Magic 개발 설계서 (전체 아키텍처, 모듈 설계, 데이터 모델, 인터페이스, 디렉토리 구조, 에러 처리, PRD 매핑, 구현 순서)

## 주요 결정사항

1. **electron-vite 채택**: Main/Preload/Renderer 통합 빌드를 지원하여 개발 경험이 우수하고, Vite 기반으로 빠른 HMR을 제공
2. **Zustand 상태 관리**: Redux 대비 보일러플레이트가 적고, Electron IPC와의 통합이 단순
3. **단일 JSON 파일 저장**: 리소스와 조합을 하나의 app-data.json에 저장하여 데이터 정합성을 보장. SQLite 등은 포터블 배포에 복잡성을 더하므로 배제
4. **Result 타입 패턴**: 모든 쓰기 작업에 `Result<T>` 타입을 사용하여 에러를 예외가 아닌 값으로 처리. IPC 경계에서의 에러 전파를 명시적으로 관리
5. **부분 실패 허용 전략**: 워크스페이스 적용 시 개별 worktree 생성 실패는 스킵하고 나머지를 계속 진행. 단, .claude/ 생성 실패(권한 오류)는 전체 중단
6. **CodeMirror 6 에디터**: Monaco Editor 대비 번들 크기가 작고, Markdown/JSON 편집에 충분한 기능 제공
7. **MCP 설정 병합 전략 (열린 질문)**: PRD의 열린 질문으로 남아있어, 현 설계에서는 mcpIds 배열로 복수 MCP를 지원하되 실제 병합 로직은 구현 시 결정하도록 유보

## 이슈 & 참고

- PRD 열린 질문 3건 (MCP 병합 전략, 스킬 하위 파일 GUI UX, CLAUDE.md 포함 여부)은 설계에서 구조적으로 확장 가능하도록 열어두었으나, 구현 전 사용자 확인이 필요하다
- 리소스가 수백 개 이상으로 늘어나면 단일 JSON 파일의 읽기/쓰기 성능이 저하될 수 있으나, 현 PRD 범위에서는 문제가 되지 않을 것으로 판단
- 향후 고려 사항(Scope 외)으로 명시된 worktree 관리, 조합 공유/내보내기, CLI 모드, 원격 저장소 클론, CLAUDE.md 조합 포함은 설계에 포함하지 않았다
